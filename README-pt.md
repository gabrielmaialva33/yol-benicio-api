<h1 align="center">
    <img src=".github/assets/images/logo.svg" height="200" alt="Logo Yol Ben√≠cio">
</h1>

<p align="center">
  <img src="https://img.shields.io/badge/vers√£o-2025.1.0-blue?style=for-the-badge&logo=semantic-release" alt="Vers√£o" />
  <img src="https://img.shields.io/github/license/gabrielmaialva33/yol-benicio-api?color=00b8d3&style=for-the-badge&logo=mit" alt="Licen√ßa" />
  <img src="https://img.shields.io/badge/Node.js-22.18.0-339933?style=for-the-badge&logo=node.js" alt="Node.js" />
  <img src="https://img.shields.io/badge/AdonisJS-6.0-5A45FF?style=for-the-badge&logo=adonisjs" alt="AdonisJS" />
  <img src="https://img.shields.io/badge/React-19.0-61DAFB?style=for-the-badge&logo=react" alt="React" />
  <img src="https://img.shields.io/badge/TypeScript-5.0-3178C6?style=for-the-badge&logo=typescript" alt="TypeScript" />
</p>

<p align="center">
  <img src="https://img.shields.io/badge/PostgreSQL-16.0-336791?style=for-the-badge&logo=postgresql" alt="PostgreSQL" />
  <img src="https://img.shields.io/badge/Redis-7.0-DC382D?style=for-the-badge&logo=redis" alt="Redis" />
  <img src="https://img.shields.io/badge/Docker-Pronto-2496ED?style=for-the-badge&logo=docker" alt="Docker" />
  <img src="https://img.shields.io/github/last-commit/gabrielmaialva33/yol-benicio-api?style=for-the-badge&logo=git" alt="√öltimo Commit" />
  <img src="https://img.shields.io/badge/feito%20com-‚ù§Ô∏è%20por%20Maia-15c3d6?style=for-the-badge" alt="Feito por Maia" />
</p>

<br>

<p align="center">
    <a href="README.md">English</a>
    ¬∑
    <a href="README-pt.md">Portuguese</a>
</p>

<p align="center">
  <a href="#bookmark-about">Sobre</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
  <a href="#computer-technologies">Tecnologias</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
  <a href="#wrench-tools">Ferramentas</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
  <a href="#package-installation">Instala√ß√£o</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
  <a href="#memo-license">Licen√ßa</a>
</p>

<br>

## :bookmark: Sobre

**Yol Ben√≠cio API** √© um sistema de gerenciamento jur√≠dico de nova gera√ß√£o constru√≠do para 2025 com tecnologias de ponta. Apresentando um poderoso backend AdonisJS v6 e frontend moderno React 19 + Inertia.js, oferece funcionalidades abrangentes para gerenciar processos jur√≠dicos, clientes, agendas, faturamento e fluxos de documentos. O sistema implementa princ√≠pios de arquitetura limpa com design modular pronto para microsservi√ßos e apresenta um sistema inteligente de navega√ß√£o baseado em pap√©is otimizado para diferentes personas de usu√°rios em escrit√≥rios jur√≠dicos.

### üöÄ **Novidades em 2025**

- **‚ö° React 19**: Recursos mais recentes do React com renderiza√ß√£o concorrente e batching autom√°tico
- **üé® TailwindCSS v4**: Framework CSS de nova gera√ß√£o com performance aprimorada
- **üîí Seguran√ßa Aprimorada**: Implementa√ß√£o JWT avan√ßada com rota√ß√£o de refresh tokens
- **üì± Mobile-First**: Design responsivo otimizado para todos os dispositivos
- **üß™### üß™ Estrat√©gia de Testes Abrangente

```mermaid
graph TB
    subgraph "Backend Testing"
        A[Japa Framework]
        B[Testes Unit√°rios]
        C[Testes Funcionais]
        D[Testes de Integra√ß√£o]
    end
    
    subgraph "Frontend Testing"
        E[MSW - Mock Service Worker]
        F[React Testing Library]
        G[Testes de Componentes]
        H[Testes E2E]
    end
    
    subgraph "Cobertura e Qualidade"
        I[Relat√≥rios de Cobertura]
        J[An√°lise de C√≥digo]
        K[Performance Testing]
        L[Testes de Acessibilidade]
    end
    
    A --> B
    A --> C
    A --> D
    E --> F
    E --> G
    E --> H
    
    style A fill:#FF6B6B
    style E fill:#4ECDC4
    style I fill:#45B7D1
```

#### üî¨ Recursos de Teste

- **Japa Framework**: Framework de testes moderno para Node.js com suporte TypeScript
- **MSW (Mock Service Worker)**: Intercepta√ß√£o de requisi√ß√µes para testes de frontend
- **Cobertura Completa**: Relat√≥rios detalhados de cobertura de c√≥digo
- **Testes Automatizados**: Pipeline CI/CD com execu√ß√£o autom√°tica de testes
- **Testes de Performance**: Benchmarking e an√°lise de performance
- **Testes de Acessibilidade**: Conformidade com padr√µes WCAG
- **üê≥ Deployment e Containeriza√ß√£o**

```mermaid
graph TB
    subgraph "Desenvolvimento"
        A[Docker Compose]
        B[Hot Reload]
        C[Debug Mode]
        D[Volume Mapping]
    end
    
    subgraph "Staging"
        E[Build Otimizado]
        F[Health Checks]
        G[Load Balancing]
        H[SSL/TLS]
    end
    
    subgraph "Produ√ß√£o"
        I[Multi-stage Build]
        J[Imagens Minificadas]
        K[Secrets Management]
        L[Monitoring]
    end
    
    A --> E
    E --> I
    B --> F
    F --> J
    C --> G
    G --> K
    D --> H
    H --> L
    
    style A fill:#2496ED
    style E fill:#FFA500
    style I fill:#32CD32
```

#### üöÄ Recursos de Deploy

- **Multi-stage Builds**: Imagens Docker otimizadas para produ√ß√£o
- **Docker Compose**: Orquestra√ß√£o completa de servi√ßos (API, DB, Redis)
- **Health Checks**: Monitoramento autom√°tico de sa√∫de dos containers
- **Secrets Management**: Gerenciamento seguro de vari√°veis de ambiente
- **Load Balancing**: Distribui√ß√£o de carga para alta disponibilidade
- **SSL/TLS**: Certificados autom√°ticos com Let's Encrypt
- **‚ö° Performance e Otimiza√ß√µes**

```mermaid
graph TB
    subgraph "Cache Strategy"
        A[Redis Cache]
        B[Query Cache]
        C[Session Cache]
        D[File Cache]
    end
    
    subgraph "Database Optimization"
        E[√çndices Otimizados]
        F[Query Optimization]
        G[Connection Pooling]
        H[Read Replicas]
    end
    
    subgraph "Frontend Performance"
        I[Code Splitting]
        J[Lazy Loading]
        K[Asset Optimization]
        L[CDN Integration]
    end
    
    subgraph "Monitoring"
        M[APM Tools]
        N[Real-time Metrics]
        O[Error Tracking]
        P[Performance Alerts]
    end
    
    A --> E
    B --> F
    C --> G
    D --> H
    E --> I
    F --> J
    G --> K
    H --> L
    I --> M
    J --> N
    K --> O
    L --> P
    
    style A fill:#DC382D
    style E fill:#336791
    style I fill:#61DAFB
    style M fill:#FF6B6B
```

#### üèéÔ∏è Otimiza√ß√µes Implementadas

- **Redis Cache**: Cache distribu√≠do para sess√µes, consultas e dados tempor√°rios
- **Database Indexing**: √çndices otimizados para consultas frequentes
- **Code Splitting**: Carregamento sob demanda de componentes React
- **Asset Optimization**: Minifica√ß√£o e compress√£o de assets est√°ticos
- **Connection Pooling**: Pool de conex√µes para melhor utiliza√ß√£o de recursos
- **Real-time Monitoring**: M√©tricas de performance em tempo real
- **Rate Limiting**: Prote√ß√£o contra abuso de API com limita√ß√£o inteligente
- **Gzip Compression**: Compress√£o autom√°tica de respostas HTTP
- **üîç Monitoramento em Tempo Real**: Health checks avan√ßados e log de auditoria

### üèóÔ∏è Vis√£o Geral da Arquitetura

```mermaid
graph TB
    subgraph "Camada Frontend"
        REACT[React 19 + TypeScript]
        INERTIA[Inertia.js]
        TAILWIND[TailwindCSS v4]
    end

    subgraph "Camada Cliente"
        WEB[Aplica√ß√µes Web]
        MOB[Aplica√ß√µes Mobile]
        API[APIs Externas]
    end

    subgraph "Gateway API - v1"
        ROUTES["/api/v1/*"]
        MW[Stack de Middleware]
    end

    subgraph "M√≥dulos"
        AUTH[M√≥dulo Auth<br/>JWT, Sess√µes]
        USER[M√≥dulo Usu√°rio<br/>CRUD, Perfil]
        ROLE[M√≥dulo Papel<br/>RBAC, Hierarquia]
        PERM[M√≥dulo Permiss√£o<br/>Contextual, Heran√ßa]
        FILE[M√≥dulo Arquivo<br/>Upload, Armazenamento]
        AUDIT[M√≥dulo Auditoria<br/>Logs, Analytics]
        HEALTH[M√≥dulo Sa√∫de<br/>Status, Monitoramento]
    end

    subgraph "Servi√ßos Core"
        JWT[Servi√ßo JWT]
        HASH[Servi√ßo Hash]
        VALIDATOR[Servi√ßo Validador]
        STORAGE[Servi√ßo Armazenamento]
    end

    subgraph "Camada de Dados"
        TS[(PostgreSQL<br/>Banco Principal)]
        REDIS[(Redis<br/>Cache & Sess√µes)]
        PGREST[PostgREST<br/>API REST Auto-gerada]
    end

    REACT --> INERTIA
    INERTIA --> ROUTES
    WEB --> ROUTES
    MOB --> ROUTES
    API --> ROUTES

    ROUTES --> MW
    MW --> AUTH
    MW --> USER
    MW --> ROLE
    MW --> PERM
    MW --> FILE
    MW --> AUDIT
    MW --> HEALTH

    AUTH --> JWT
    AUTH --> HASH
    USER --> VALIDATOR
    FILE --> STORAGE
    PERM --> REDIS
    AUDIT --> TS

    USER --> TS
    ROLE --> TS
    PERM --> TS
    AUTH --> TS
    AUTH --> REDIS
    AUDIT --> TS

    TS --> PGREST

    style ROUTES fill:#4A90E2
    style TS fill:#336791
    style REDIS fill:#DC382D
    style PGREST fill:#008080
```

### üéØ Arquitetura Frontend Moderna

```mermaid
graph TB
    subgraph "Frontend Stack 2025"
        A[React 19] --> B[Inertia.js]
        B --> C[TypeScript 5.0]
        C --> D[TailwindCSS v4]
    end
    
    subgraph "Componentes de Interface"
        E[Dashboard Responsivo]
        F[Sistema de Abas]
        G[Timeline Interativa]
        H[Formul√°rios Din√¢micos]
        I[Modais e Overlays]
    end
    
    subgraph "Hooks Personalizados"
        J[useRoleRedirect]
        K[useAuth]
        L[useProcess]
        M[usePermissions]
        N[useNotifications]
    end
    
    subgraph "Gerenciamento de Estado"
        O[Context API]
        P[Inertia State]
        Q[Local Storage]
        R[Session Storage]
    end
    
    A --> E
    B --> F
    C --> G
    D --> H
    
    style A fill:#61DAFB
    style B fill:#9333EA
    style C fill:#3178C6
    style D fill:#06B6D4
```

#### üîß Recursos Avan√ßados do Frontend

- **React 19**: Renderiza√ß√£o concorrente, batching autom√°tico, Suspense aprimorado
- **Inertia.js**: SPA sem API, roteamento do lado do servidor, compartilhamento de estado
- **TypeScript 5.0**: Tipagem est√°tica, intellisense avan√ßado, refatora√ß√£o segura
- **TailwindCSS v4**: Utilit√°rios CSS, design system, responsividade mobile-first
- **Componentes Reutiliz√°veis**: Biblioteca de componentes modular e test√°vel

### üîê Fluxo de Autentica√ß√£o

```mermaid
sequenceDiagram
    participant C as Cliente
    participant API as Gateway API
    participant AUTH as M√≥dulo Auth
    participant JWT as Servi√ßo JWT
    participant DB as PostgreSQL
    participant REDIS as Cache Redis

    C->>API: POST /api/v1/sessions/sign-in
    API->>AUTH: Validar credenciais
    AUTH->>DB: Buscar usu√°rio por email
    DB-->>AUTH: Dados do usu√°rio
    AUTH->>AUTH: Verificar hash da senha
    AUTH->>JWT: Gerar tokens
    JWT-->>AUTH: Tokens de acesso & refresh
    AUTH->>REDIS: Armazenar sess√£o
    AUTH-->>C: Retornar tokens + dados do usu√°rio

    Note over C,API: Requisi√ß√µes subsequentes

    C->>API: GET /api/v1/users (Bearer token)
    API->>AUTH: Validar JWT
    AUTH->>REDIS: Verificar sess√£o
    REDIS-->>AUTH: Sess√£o v√°lida
    AUTH-->>API: Usu√°rio autenticado
    API-->>C: Retornar recurso protegido
```

### üìÅ Estrutura Modular

```mermaid
graph TD
    subgraph "Estrutura da Aplica√ß√£o"
        APP[app/]
        MODULES[modules/]

        subgraph "M√≥dulo Usu√°rio"
            USER_M[user/]
        end
        subgraph "M√≥dulo Papel"
            ROLE_M[role/]
        end
        subgraph "M√≥dulo Permiss√£o"
            PERM_M[permission/]
        end
        subgraph "M√≥dulo Arquivo"
            FILE_M[file/]
        end
        subgraph "M√≥dulo Auditoria"
            AUDIT_M[audit/]
        end
        subgraph "M√≥dulo Sa√∫de"
            HEALTH_M[health/]
        end
        subgraph "M√≥dulo Propriedade"
            OWNER_M[ownership/]
        end
    end

    APP --> MODULES
    MODULES --> USER_M
    MODULES --> ROLE_M
    MODULES --> PERM_M
    MODULES --> FILE_M
    MODULES --> AUDIT_M
    MODULES --> HEALTH_M
    MODULES --> OWNER_M
```

## üåü Principais Funcionalidades

### Funcionalidades Core

- **üîê Autentica√ß√£o JWT**: Autentica√ß√£o segura baseada em tokens com refresh tokens
- **üë• Controle de Acesso Baseado em Pap√©is**: Permiss√µes refinadas com pap√©is ROOT, ADMIN, USER, EDITOR e GUEST
- **üìÅ Arquitetura Modular**: Clara separa√ß√£o de responsabilidades com m√≥dulos de funcionalidades
- **üóÑÔ∏è PostgreSQL**: Banco de dados robusto e confi√°vel
- **üöÄ API RESTful**: Endpoints bem estruturados seguindo princ√≠pios REST
- **üì§ Upload de Arquivos**: Manipula√ß√£o segura de arquivos com m√∫ltiplos drivers de armazenamento
- **üè• Monitoramento de Sa√∫de**: Endpoints integrados para verifica√ß√£o de sa√∫de
- **üîí Seguran√ßa em Primeiro Lugar**: Hash de senhas, CORS, rate limiting pronto
- **üìù Valida√ß√£o de Requisi√ß√µes**: DTOs com valida√ß√£o em tempo de execu√ß√£o

### Funcionalidades Frontend

- **‚öõÔ∏è React 19**: React moderno com recursos e melhorias de performance mais recentes
- **üîÑ Inertia.js**: Experi√™ncia SPA sem complexidade de API
- **üìò TypeScript**: Seguran√ßa de tipos completa entre frontend e backend
- **üé® TailwindCSS v4**: Framework CSS moderno utility-first
- **üß™ Testes MSW**: Mock Service Worker para testes abrangentes do frontend
- **üì± Design Responsivo**: Abordagem mobile-first com otimiza√ß√£o para desktop

### Sistema de Navega√ß√£o Baseado em Pap√©is

- **üë®‚Äçüíº Dashboard do Gestor**: Acesso completo com gerenciamento de equipe e relat√≥rios
- **üë§ Dashboard do Cliente**: Vis√£o limitada focada em processos pessoais
- **üë®‚Äçüíª Dashboard do Colaborador**: Opera√ß√µes di√°rias com consulta processual e timeline
- **üîÑ Redirecionamentos Inteligentes**: Roteamento autom√°tico baseado em pap√©is ap√≥s autentica√ß√£o
- **üõ°Ô∏è Guardas de Permiss√£o**: Controle de acesso em n√≠vel de rota baseado em pap√©is de usu√°rio
- **üåê Pronto para i18n**: Suporte a internacionaliza√ß√£o integrado
- **üîó Integra√ß√£o PostgREST**: API REST auto-gerada para acesso direto ao banco

### Funcionalidades Avan√ßadas de ACL

- **üéØ Permiss√µes Contextuais**: Suporte para contextos `own`, `any`, `team` e `department`
- **üîÑ Heran√ßa de Permiss√µes**: Heran√ßa autom√°tica de permiss√µes atrav√©s da hierarquia de pap√©is
- **üìã Trilha de Auditoria Completa**: Rastreamento de todas as verifica√ß√µes de permiss√£o e tentativas de acesso
- **‚ö° Permiss√µes em Cache Redis**: Verifica√ß√£o de permiss√µes de alta performance com cache inteligente
- **üè¢ Propriedade de Recursos**: Sistema de propriedade integrado com suporte a contextos de equipe e departamento
- **üîç Controle Granular de Permiss√µes**: Sistema de permiss√µes baseado em Recurso + A√ß√£o + Contexto

### Esquema do Banco de Dados

```mermaid
erDiagram
    USERS ||--o{ USER_ROLES : possui
    ROLES ||--o{ USER_ROLES : possui
    USERS ||--o{ USER_PERMISSIONS : possui
    USERS ||--o{ FILES : envia
    ROLES ||--o{ ROLE_PERMISSIONS : possui
    PERMISSIONS ||--o{ ROLE_PERMISSIONS : possui
    PERMISSIONS ||--o{ USER_PERMISSIONS : possui
    USERS ||--o{ AUDIT_LOGS : gera

    USERS {
        bigint id PK
        string first_name
        string last_name
        string email UK
        string username UK
        string password
        string avatar_url
        boolean is_online
        timestamp deleted_at
        timestamp created_at
        timestamp updated_at
    }

    ROLES {
        bigint id PK
        string name
        string slug UK
        string description
        timestamp created_at
        timestamp updated_at
    }

    PERMISSIONS {
        bigint id PK
        string name UK
        string resource
        string action
        string context
        string description
        timestamp created_at
        timestamp updated_at
    }

    USER_ROLES {
        bigint id PK
        bigint user_id FK
        bigint role_id FK
        timestamp created_at
        timestamp updated_at
    }

    ROLE_PERMISSIONS {
        bigint id PK
        bigint role_id FK
        bigint permission_id FK
        timestamp created_at
        timestamp updated_at
    }

    USER_PERMISSIONS {
        bigint id PK
        bigint user_id FK
        bigint permission_id FK
        boolean granted
        timestamp expires_at
        timestamp created_at
        timestamp updated_at
    }

    AUDIT_LOGS {
        bigint id PK
        bigint user_id FK
        string resource
        string action
        string context
        bigint resource_id
        string result
        string reason
        string ip_address
        string user_agent
        json metadata
        timestamp created_at
    }

    FILES {
        bigint id PK
        bigint owner_id FK
        string client_name
        string file_name
        bigint file_size
        string file_type
        string file_category
        string url
        timestamp created_at
        timestamp updated_at
    }
```

<br>

## :computer: Tecnologias

- **[Typescript](https://www.typescriptlang.org/)**
- **[Node.js](https://nodejs.org/)**
- **[AdonisJS](https://adonisjs.com/)**
- **[PostgreSQL](https://www.postgresql.org/)**
- **[Redis](https://redis.io/)** - Armazenamento de dados em mem√≥ria
- **[PostgREST](https://postgrest.org/)** - API REST auto-gerada
- **[Docker](https://www.docker.com/)**

<br>

## :wrench: Ferramentas

- **[WebStorm](https://www.jetbrains.com/webstorm/)**
- **[Insomnia](https://insomnia.rest/)**
- **[DataGrip](https://www.jetbrains.com/datagrip/)**

<br>

## üß≠ Fluxo de Navega√ß√£o Baseado em Pap√©is

O sistema YOL Ben√≠cio implementa um fluxo de navega√ß√£o inteligente que adapta a experi√™ncia do usu√°rio baseado em seu papel no sistema.

### Fluxo Principal de Navega√ß√£o

```mermaid
flowchart TD
    A[Login] --> B{Verificar Papel}
    B -->|Gestor| C[Dashboard Gestor]
    B -->|Cliente| D[Dashboard Cliente]
    B -->|Colaborador| E[Dashboard Colaborador]

    E --> F[Consulta Processual]
    F --> G[Detalhes do Processo]
    G --> H[Timeline de Movimenta√ß√µes]

    C --> I[Gerenciamento de Equipe]
    C --> J[Relat√≥rios Gerenciais]

    D --> K[Meus Processos]
    D --> L[Documentos Pessoais]
```

### Fluxo Principal de Navega√ß√£o (Colaborador)

O fluxo principal do sistema segue a jornada de um **Colaborador**:

1. **Login** ‚Üí Autentica√ß√£o segura com JWT
2. **Dashboard Colaborador** ‚Üí Vis√£o geral das tarefas e processos atribu√≠dos
3. **Consulta Processual** ‚Üí Busca e filtros avan√ßados de processos
4. **Detalhes do Processo** ‚Üí Visualiza√ß√£o completa com abas organizadas
5. **Timeline** ‚Üí Hist√≥rico cronol√≥gico de movimenta√ß√µes e atualiza√ß√µes

### Defini√ß√£o de Pap√©is

| Papel           | N√≠vel de Acesso | Funcionalidades Principais                                    |
| --------------- | --------------- | ------------------------------------------------------------- |
| **Gestor**      | Completo        | Gerenciamento de equipe, relat√≥rios, configura√ß√µes do sistema |
| **Cliente**     | Limitado        | Visualiza√ß√£o de processos pessoais, documentos, agendamentos  |
| **Colaborador** | Operacional     | Consulta processual, timeline, gest√£o de casos atribu√≠dos     |

## :package: Instala√ß√£o

### :heavy_check_mark: **Pr√©-requisitos**

Os seguintes softwares devem estar instalados:

- **[Node.js](https://nodejs.org/en/) 22+**
- **[Git](https://git-scm.com/)**
- **[PNPM](https://pnpm.io/) (recomendado)**, ou **[NPM](https://www.npmjs.com/)** / **[Yarn](https://yarnpkg.com/)**
- **[PostgreSQL](https://www.postgresql.org/download/)** ou **[Docker](https://www.docker.com/get-started/)**

<br>

### :arrow_down: **Clonando o reposit√≥rio**

```sh
    $ git clone https://github.com/gabrielmaialva33/yol-benicio-api.git
```

<br>

### :arrow_forward: **Rodando o backend**

````sh
 :package: API

```sh
    $ cd yol-benicio-api
    # Instala√ß√£o de depend√™ncias
    $ pnpm install  # ou npm install / yarn
    # Configura√ß√£o ambiente de sistema
    $ cp .env.example .env
    # Criar estrutura do banco (garanta Postgres/Redis ativos)
    $ node ace migration:run  # ou docker compose -f docker-compose.dev.yml up --build
    # Iniciar API
    $ pnpm dev  # ou node ace serve --hmr
````

> Opcional: Usar Docker para tudo

> ```sh
> docker compose -f docker-compose.dev.yml up --build
> ```

````

<br>

## :twisted_rightwards_arrows: Rotas da API

A API √© versionada e todos os endpoints s√£o prefixados com `/api/v1/`. Abaixo est√° a estrutura completa de rotas:

### üõ£Ô∏è Organiza√ß√£o das Rotas

```mermaid
graph LR
    subgraph "Rotas P√∫blicas"
        HOME[GET /]
        HEALTH[GET /api/v1/health]
        SIGNIN[POST /api/v1/sessions/sign-in]
        SIGNUP[POST /api/v1/sessions/sign-up]
    end

    subgraph "Rotas Protegidas"
        subgraph "Rotas de Usu√°rio"
            USER_LIST[GET /api/v1/users]
            USER_GET[GET /api/v1/users/:id]
            USER_CREATE[POST /api/v1/users]
            USER_UPDATE[PUT /api/v1/users/:id]
            USER_DELETE[DELETE /api/v1/users/:id]
        end

        subgraph "Rotas Admin"
            ROLE_LIST[GET /api/v1/admin/roles]
            ROLE_ATTACH[PUT /api/v1/admin/roles/attach]
        end

        subgraph "Rotas de Arquivo"
            FILE_UPLOAD[POST /api/v1/files/upload]
        end
    end

    style HOME fill:#90EE90
    style HEALTH fill:#90EE90
    style SIGNIN fill:#90EE90
    style SIGNUP fill:#90EE90
    style ROLE_LIST fill:#FFB6C1
    style ROLE_ATTACH fill:#FFB6C1
````

### üìã Detalhes das Rotas

| M√©todo     | Endpoint                                    | Descri√ß√£o                           | Auth Obrigat√≥ria | Permiss√£o/Papel    |
| ---------- | ------------------------------------------- | ----------------------------------- | ---------------- | ------------------ |
| **GET**    | `/`                                         | Informa√ß√µes da API                  | ‚ùå               | -                  |
| **GET**    | `/api/v1/health`                            | Verifica√ß√£o de sa√∫de                | ‚ùå               | -                  |
| **POST**   | `/api/v1/sessions/sign-in`                  | Login de usu√°rio                    | ‚ùå               | -                  |
| **POST**   | `/api/v1/sessions/sign-up`                  | Registro de usu√°rio                 | ‚ùå               | -                  |
| **GET**    | `/api/v1/verify-email`                      | Verificar email do usu√°rio          | ‚ùå               | -                  |
| **POST**   | `/api/v1/resend-verification-email`         | Reenviar email de verifica√ß√£o       | ‚úÖ               | -                  |
| **GET**    | `/api/v1/me`                                | Obter perfil do usu√°rio atual       | ‚úÖ               | -                  |
| **GET**    | `/api/v1/me/permissions`                    | Obter permiss√µes do usu√°rio atual   | ‚úÖ               | -                  |
| **GET**    | `/api/v1/me/roles`                          | Obter pap√©is do usu√°rio atual       | ‚úÖ               | -                  |
| **GET**    | `/api/v1/users`                             | Listar usu√°rios (paginado)          | ‚úÖ               | users.list         |
| **GET**    | `/api/v1/users/:id`                         | Obter usu√°rio por ID                | ‚úÖ               | users.read         |
| **POST**   | `/api/v1/users`                             | Criar usu√°rio                       | ‚úÖ               | users.create       |
| **PUT**    | `/api/v1/users/:id`                         | Atualizar usu√°rio                   | ‚úÖ               | users.update       |
| **DELETE** | `/api/v1/users/:id`                         | Deletar usu√°rio                     | ‚úÖ               | users.delete       |
| **GET**    | `/api/v1/admin/roles`                       | Listar pap√©is                       | ‚úÖ               | ROOT, ADMIN        |
| **PUT**    | `/api/v1/admin/roles/attach`                | Atribuir papel ao usu√°rio           | ‚úÖ               | ROOT, ADMIN        |
| **GET**    | `/api/v1/admin/permissions`                 | Listar permiss√µes                   | ‚úÖ               | permissions.list   |
| **POST**   | `/api/v1/admin/permissions`                 | Criar permiss√£o                     | ‚úÖ               | permissions.create |
| **PUT**    | `/api/v1/admin/roles/permissions/sync`      | Sincronizar permiss√µes do papel     | ‚úÖ               | permissions.update |
| **PUT**    | `/api/v1/admin/roles/permissions/attach`    | Anexar permiss√µes ao papel          | ‚úÖ               | permissions.update |
| **PUT**    | `/api/v1/admin/roles/permissions/detach`    | Desanexar permiss√µes do papel       | ‚úÖ               | permissions.update |
| **PUT**    | `/api/v1/admin/users/permissions/sync`      | Sincronizar permiss√µes do usu√°rio   | ‚úÖ               | permissions.update |
| **GET**    | `/api/v1/admin/users/:id/permissions`       | Obter permiss√µes diretas do usu√°rio | ‚úÖ               | permissions.list   |
| **POST**   | `/api/v1/admin/users/:id/permissions/check` | Verificar permiss√µes do usu√°rio     | ‚úÖ               | permissions.list   |
| **POST**   | `/api/v1/files/upload`                      | Upload de arquivo                   | ‚úÖ               | files.create       |

### üîÑ Fluxo de Requisi√ß√£o/Resposta

```mermaid
sequenceDiagram
    participant Cliente
    participant Router
    participant Middleware
    participant Controller
    participant Service
    participant Repository
    participant Database

    Cliente->>Router: Requisi√ß√£o HTTP
    Router->>Middleware: Match de Rota

    alt Rota Protegida
        Middleware->>Middleware: Verifica√ß√£o Auth
        Middleware->>Middleware: Verifica√ß√£o ACL
    end

    Middleware->>Controller: Requisi√ß√£o Validada
    Controller->>Service: L√≥gica de Neg√≥cio
    Service->>Repository: Acesso aos Dados
    Repository->>Database: Query
    Database-->>Repository: Resultado
    Repository-->>Service: Entidade/DTO
    Service-->>Controller: Dados de Resposta
    Controller-->>Cliente: Resposta HTTP
```

### üîê Sistema de Permiss√µes

O sistema avan√ßado de permiss√µes suporta controle de acesso contextual:

```mermaid
graph TD
    subgraph "Estrutura de Permiss√£o"
        P[Permiss√£o]
        P --> R[Recurso]
        P --> A[A√ß√£o]
        P --> C[Contexto]

        R --> |exemplos| R1[users]
        R --> |exemplos| R2[files]
        R --> |exemplos| R3[permissions]

        A --> |exemplos| A1[create]
        A --> |exemplos| A2[read]
        A --> |exemplos| A3[update]
        A --> |exemplos| A4[delete]
        A --> |exemplos| A5[list]

        C --> |exemplos| C1[own - Apenas recursos pr√≥prios]
        C --> |exemplos| C2[any - Qualquer recurso]
        C --> |exemplos| C3[team - Recursos da equipe]
        C --> |exemplos| C4[department - Recursos do departamento]
    end
```

#### Hierarquia de Pap√©is e Heran√ßa

```
ROOT
‚îú‚îÄ‚îÄ ADMIN (herda todas as permiss√µes ROOT)
‚îÇ   ‚îú‚îÄ‚îÄ USER (herda permiss√µes b√°sicas ADMIN)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GUEST (herda permiss√µes limitadas USER)
‚îÇ   ‚îî‚îÄ‚îÄ EDITOR (herda permiss√µes de conte√∫do ADMIN)
       ‚îî‚îÄ‚îÄ USER (herda de EDITOR)
```

#### Exemplos de Contexto

- `users.update.own` - Pode atualizar apenas o pr√≥prio perfil
- `users.update.any` - Pode atualizar qualquer usu√°rio
- `files.delete.team` - Pode deletar arquivos de membros da equipe
- `reports.read.department` - Pode ler relat√≥rios do pr√≥prio departamento

### üì• Cole√ß√µes & Documenta√ß√£o da API

- Arquivo de requisi√ß√µes HTTP: `docs/api.http` (importe no VS Code REST Client ou Insomnia)
- Especifica√ß√£o OpenAPI: `docs/openapi.yaml`
- Redoc (HTML est√°tico): `docs/redoc.html`

## :memo: Licen√ßa

O projeto est√° sobre a licen√ßa [MIT](./LICENSE) ‚ù§Ô∏è

Gostou? Deixe uma estrela para ajudar o projeto ‚≠ê

<br>

<p align="center">
  <img src="https://raw.githubusercontent.com/gabrielmaialva33/gabrielmaialva33/master/assets/gray0_ctp_on_line.svg?sanitize=true" />
</p>

<p align="center">
  &copy; 2017-present <a href="https://github.com/gabrielmaialva33/" target="_blank">Maia</a>
</p>
